<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Siap Antar, Siap Jemput & Siap Suruh</title>
<style>
body {
  font-family: 'Poppins', sans-serif;
  background-color: #f7f8fa;
  margin: 0;
  padding: 0;
}
header {
  background: linear-gradient(90deg, #ff7b00, #00b894);
  color: white;
  text-align: center;
  padding: 15px;
  font-weight: bold;
  font-size: 18px;
}
.container {
  padding: 15px;
}
.menu-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 15px;
  margin-top: 10px;
}
.menu-item {
  background: white;
  border-radius: 12px;
  text-align: center;
  padding: 10px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.1);
}
.menu-item img {
  width: 60px;
  height: 60px;
}
.menu-item p {
  margin-top: 5px;
  font-size: 14px;
  font-weight: 600;
}
.popup {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  overflow-y: auto;
}
.popup-content {
  background: #fff;
  margin: 60px auto;
  padding: 20px;
  border-radius: 15px;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 5px 10px rgba(0,0,0,0.3);
}
input, select, textarea {
  width: 100%;
  padding: 10px;
  margin: 6px 0;
  border-radius: 10px;
  border: 1px solid #ccc;
}
button {
  background: #ff7b00;
  border: none;
  color: white;
  padding: 12px;
  width: 100%;
  border-radius: 10px;
  font-size: 16px;
  cursor: pointer;
}
button:hover {
  background: #ff9500;
}
.map-container {
  width: 100%;
  height: 200px;
  border-radius: 10px;
  overflow: hidden;
  margin-top: 8px;
}
.navbar {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: #fff;
  box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
  display: flex;
  justify-content: space-around;
  padding: 10px 0;
}
.navbar button {
  width: 30%;
  font-size: 14px;
  border-radius: 8px;
  background: #00b894;
}
.navbar button.chat {
  background: #ff7b00;
}
</style>
</head>
<body>

<header>üöó Siap Antar, Siap Jemput & Siap Suruh</header>

<div class="container">
  <div class="menu-grid">
    <div class="menu-item" onclick="openPopup('Antar Jemput')">
      <img src="https://cdn-icons-png.flaticon.com/512/2972/2972185.png">
      <p>Antar Jemput</p>
    </div>
    <div class="menu-item" onclick="openPopup('Kirim Paket')">
      <img src="https://cdn-icons-png.flaticon.com/512/679/679720.png">
      <p>Kirim Paket</p>
    </div>
    <div class="menu-item" onclick="openPopup('Bersih-Bersih')">
      <img src="https://cdn-icons-png.flaticon.com/512/809/809957.png">
      <p>Bersih-Bersih</p>
    </div>
    <div class="menu-item" onclick="openPopup('Bersihin Kebun')">
      <img src="https://cdn-icons-png.flaticon.com/512/3194/3194834.png">
      <p>Bersihin Kebun</p>
    </div>
    <div class="menu-item" onclick="openPopup('Tambal Ban')">
      <img src="https://cdn-icons-png.flaticon.com/512/9131/9131734.png">
      <p>Tambal Ban</p>
    </div>
    <div class="menu-item" onclick="openPopup('Tukang')">
      <img src="https://cdn-icons-png.flaticon.com/512/1802/1802979.png">
      <p>Tukang</p>
    </div>
  </div>
</div>

<div class="popup" id="popupForm">
  <div class="popup-content">
    <h3>Form Pesanan</h3>
    <input type="text" id="nama" placeholder="Nama Pemesan">
    <input type="text" id="layanan" readonly>
    <input type="text" id="lokasiUrl" placeholder="Titik Jemput (URL Maps)">
    <button type="button" onclick="getLocation()">üìç Set Lokasi Jemput</button>
    <input type="text" id="detailAlamat" placeholder="Detail Alamat">
    <input type="text" id="tujuan" placeholder="Alamat Tujuan">
    <input type="number" id="jarak" placeholder="Perkiraan Jarak (KM)" oninput="updateBiaya()">
    <input type="text" id="biaya" placeholder="Estimasi Biaya Otomatis" readonly>
    
    <select id="metode">
      <option value="CASH DRIVER">CASH DRIVER</option>
      <option value="TRANSFER">TRANSFER</option>
      <option value="QRIS">QRIS</option>
    </select>

    <div class="map-container" id="map"></div>
    <button onclick="kirimPesanan()">Kirim Pesanan</button>
    <button onclick="closePopup()" style="background:#999;margin-top:8px;">Tutup</button>
  </div>
</div>

<div class="navbar">
  <button onclick="window.location.reload()">üè† Home</button>
  <button class="chat" onclick="window.open('https://wa.me/6281262433533','_blank')">üí¨ Chat Admin</button>
  <button onclick="alert('Fitur Pesanan Aktif')">üì¶ Pesanan</button>
</div>

<script>
let selectedService = "";

function openPopup(service) {
  selectedService = service;
  document.getElementById('popupForm').style.display = 'block';
  document.getElementById('layanan').value = service;
  document.getElementById('biaya').value = "";
}

function closePopup() {
  document.getElementById('popupForm').style.display = 'none';
}

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(pos => {
      const lat = pos.coords.latitude;
      const lng = pos.coords.longitude;
      const mapUrl = `https://www.google.com/maps?q=${lat},${lng}`;
      document.getElementById('lokasiUrl').value = mapUrl;

      const mapDiv = document.getElementById("map");
      mapDiv.innerHTML = `<iframe width="100%" height="200" style="border:0;" loading="lazy"
        src="https://www.google.com/maps?q=${lat},${lng}&hl=id&z=15&output=embed"></iframe>`;
    });
  } else {
    alert("Browser tidak mendukung GPS.");
  }
}

function updateBiaya() {
  const jarak = parseFloat(document.getElementById('jarak').value);
  const service = selectedService;
  if (["Antar Jemput", "Kirim Paket"].includes(service) && !isNaN(jarak)) {
    let biaya = jarak * 4000;
    const sisa = biaya % 1000;
    if (sisa >= 500) biaya += (1000 - sisa);
    else biaya -= sisa;
    document.getElementById('biaya').value = biaya.toLocaleString('id-ID');
  } else {
    document.getElementById('biaya').value = "Nego dengan petugas";
  }
}

function kirimPesanan() {
  const nama = document.getElementById('nama').value || "-";
  const layanan = document.getElementById('layanan').value;
  const lokasi = document.getElementById('lokasiUrl').value || "-";
  const detail = document.getElementById('detailAlamat').value || "-";
  const tujuan = document.getElementById('tujuan').value || "-";
  const jarak = document.getElementById('jarak').value || "0";
  const biaya = document.getElementById('biaya').value || "Nego";
  const metode = document.getElementById('metode').value;

  const pesan = `Halo Admin, saya ingin pesan jasa ${layanan}.\n\nNama: ${nama}\nLokasi Jemput: ${lokasi}\nDetail: ${detail}\nTujuan: ${tujuan}\nJarak: ${jarak} KM\nPerkiraan Biaya: ${biaya}\nMetode Bayar: ${metode}`;
  
  const waUrl = `https://wa.me/6281262433533?text=${encodeURIComponent(pesan)}`;
  window.open(waUrl, "_blank");
}
</script>

</body>
</html>
